QUIL-AutoScripts

QUIL-AutoScripts is a comprehensive collection of shell scripts for automating various processes within the QUIL project. These scripts include functionalities like querying balances, generating collection commands, merging tokens, and configuring settings, ensuring an efficient workflow for users and developers.

Important Notice

File Placement

1.	The following scripts must be placed in QUIL’s working directory, such as ~/ceremonyclient/node/:
	•	save_balance_loop.sh
	•	save_coins_full_output.sh
	•	execute_transfer_commands.sh
	•	merge_token.sh
	•	merge_runner.sh
	•	transfer_tokens.sh

2.	The script configure_node.sh must be placed in the parent directory of the configuration files.
Ensure that this script is at the same level as the config directory.

Permissions

All script files must be granted execution permissions. Use the following command to apply execute permissions to all scripts:

chmod +x save_balance_loop.sh save_coins_full_output.sh execute_transfer_commands.sh merge_token.sh merge_runner.sh transfer_tokens.sh configure_node.sh

Example Directory Structure

~/ceremonyclient/
│
├── node/
│   ├── save_balance_loop.sh
│   ├── save_coins_full_output.sh
│   ├── execute_transfer_commands.sh
│   ├── merge_token.sh
│   ├── merge_runner.sh
│   ├── transfer_tokens.sh
│   └── [Other working files...]
│
├── configure_node.sh
├── config/
│   ├── config.yml
│   └── [Other config files...]

Summary

	•	Script Placement: Follow the directory requirements strictly to ensure proper script functionality.
	•	Permissions: Always set execution permissions using chmod +x. Without proper permissions, the scripts will not run.

Scripts Overview

1. save_balance_loop.sh: Automatic Balance Query (Summary Mode)

Queries and logs the total balance for each machine in a summary format. The output is used for high-level balance overviews.
Output: A log file with summarized balances.

2. save_coins_full_output.sh: Automatic Balance Query (Detailed Mode)

Queries and logs detailed balances for each machine, breaking down individual components and summing them up. The output is foundational for generating collection commands.
Output: A detailed balance log file.

3. transfer_tokens.sh: Collection Command Generation

Generates token collection commands based on the detailed balance logs from save_coins_full_output.sh. These commands are not executed automatically, allowing manual review and execution.
Output: A log file (transfer_output.txt) containing generated commands.

4. execute_transfer_commands.sh: Execute Collection Commands

Executes all collection commands generated by transfer_tokens.sh and logs the results for tracking.
Output: A log file (execution_output.log) containing execution results.

5. merge_tokens.sh: Automatic Token Merging

Merges all coins into a single token to facilitate bridging and transfers. The script ensures streamlined management of balances.
Output: A log file summarizing the merge process.

6. merge_runner.sh: Scheduled Token Merging

A scheduled version of the merge_tokens.sh script. It automates periodic token merging for continuous balance management.

7. configure_node.sh (Renamed from key.sh)

Configures the config.yml file by setting the listenGrpcMultiaddr field to an empty string for all official public nodes.

Usage Guide

1. Query Balances (Summary Mode)
Run save_balance_loop.sh to query and log total balances for each machine.

2. Query Balances (Detailed Mode)
Run save_coins_full_output.sh for detailed balance information, which is required for generating collection commands.

3. Generate Collection Commands
Use transfer_tokens.sh to generate token collection commands based on detailed balance logs.

4. Execute Collection Commands
Run execute_transfer_commands.sh to execute all generated commands and log the results.

5. Merge Tokens
Use merge_tokens.sh for token merging or merge_runner.sh for scheduled merging.

6. Configure Nodes
Run configure_node.sh to update the config.yml file for all official public nodes.

Contributions

Feel free to open issues or pull requests to enhance the functionality of these scripts.

Stay Connected

For updates and discussions, follow me on Twitter (X): @damobianyuan.
